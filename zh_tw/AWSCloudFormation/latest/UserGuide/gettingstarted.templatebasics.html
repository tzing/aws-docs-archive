<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>了解範本的基本知識 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="gettingstarted.templatebasics" /><meta name="default_state" content="gettingstarted.templatebasics" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="description" content="了解使用範本資源、參數和其他元件的範本基本知識，以及運作方式。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="使用者指南" /><meta name="abstract" content="利用此使用者指南，透過 AWS CloudFormation 以可預期且重複的方式建立和管理 AWS 基礎設施部署。" /><meta name="guide-locale" content="zh_tw" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="使用者指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="使用者指南" /><meta id="panorama-serviceConsolePage" value="了解範本的基本知識" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>了解範本的基本知識 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,資源佈建,資源組態,基礎設施管理,CloudFormer,CloudFormation 堆疊,CloudFormation 範本,變更集合" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "使用者指南",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation 入門",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "了解範本的基本知識",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文件</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">使用者指南</a></div><div id="page-toc-src"><a href="#gettingstarted.templatebasics.what">什麼是 AWS CloudFormation 範本？</a><a href="#gettingstarted.templatebasics.simple">資源：Hello Bucket!</a><a href="#gettingstarted.templatebasics.multiple">資源屬性和配合使用資源</a><a href="#gettingstarted.templatebasics.parameters">使用輸入參數接收使用者輸入</a><a href="#gettingstarted.templatebasics.mappings">使用映射指定條件值</a><a href="#gettingstarted.templatebasics.outputs">已建構的值和輸出值</a><a href="#gettingstarted.templatebasics.learnmore">後續步驟</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>本文為英文版的機器翻譯版本，如內容有任何歧義或不一致之處，概以英文版為準。</p></awsui-alert><h1 class="topictitle" id="gettingstarted.templatebasics">了解範本的基本知識</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="highlights" id="inline-topiclist"><h6>主題</h6><ul><li><a href="#gettingstarted.templatebasics.what">什麼是 AWS CloudFormation 範本？</a></li><li><a href="#gettingstarted.templatebasics.simple">資源：Hello Bucket!</a></li><li><a href="#gettingstarted.templatebasics.multiple">資源屬性和配合使用資源</a></li><li><a href="#gettingstarted.templatebasics.parameters">使用輸入參數接收使用者輸入</a></li><li><a href="#gettingstarted.templatebasics.mappings">使用映射指定條件值</a></li><li><a href="#gettingstarted.templatebasics.outputs">已建構的值和輸出值</a></li><li><a href="#gettingstarted.templatebasics.learnmore">後續步驟</a></li></ul></div><p>在<a href="./GettingStarted.Walkthrough.html">開始使用</a>中，您已了解如何使用範本建立堆疊。您看到在範本中宣告的資源，以及它們如何映射到堆疊中的資源。我們也觸及輸入參數，以及其如何在您從範本建立堆疊時讓您傳入特定值。在本節中，我們會更深入探討資源和參數。我們也會涵蓋其他範本元件，讓您了解如何運用這些元件，建立可製作您想要之 AWS 資源的範本。</p>
    <h2 id="gettingstarted.templatebasics.what">什麼是 AWS CloudFormation 範本？</h2>

    <p>範本是形成堆疊之 AWS 資源的宣告。範本會存放為文字檔案，其格式遵守 JavaScript 物件標記法 (JSON) 或 YAML 標準。由於其為文字檔案，您可以在任何文字編輯器中建立和編輯它們，並在來源控制系統中使用剩餘原始程式碼進行管理。如需範本格式的詳細資訊，請參閱<a href="./template-formats.html">AWS CloudFormation 範本格式</a>。</p>
    <p>在範本中，您宣告想要建立和設定的 AWS 資源。您將物件宣告為名稱/值對，或括以子物件的一對名稱。語法取決於您使用的格式。如需詳細資訊，請參閱<a href="./template-anatomy.html">範本剖析</a>。唯一需要的最上層物件是資源物件，其至少必須宣告一項資源。讓我們從只包含一個資源物件的最基本範本開始，它包含單一資源宣告。</p>
   
    <h2 id="gettingstarted.templatebasics.simple">資源：Hello Bucket!</h2>
    <p>資源物件包含資源物件清單。資源宣告包含資源的屬性，其自行宣告為子物件。資源必須有 <code class="code">Type</code> 屬性，以定義您要建立的 AWS 資源種類。<code class="code">Type</code> 屬性有特殊的格式：</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">AWS::<code class="replaceable">ProductIdentifier</code>::<code class="replaceable">ResourceType</code></code></pre>
    <p>例如，Amazon S3 儲存貯體的資源類型是 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a>。如需資源類型的完整清單，請參閱<a href="./template-reference.html">範本參考</a>。</p>
    <p>我們來看看基本範本。以下範本會宣告名為 HelloBucket 的 <code class="code">AWS::S3::Bucket:</code> 類型單一資源。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket"&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
</code></pre>
    </div>
    <p>如果您使用此範本建立堆疊，AWS CloudFormation 會建立 Amazon S3 儲存貯體。建立儲存貯體很簡單，因為 CloudFormation 可以使用預設設定建立儲存貯體。對於 Amazon EC2 Auto Scaling 群組或 EC2 執行個體等其他資源，CloudFormation 需要更多資訊。資源宣告使用 <code class="code">Properties</code> 屬性指定建立資源所用的資訊。</p>
    <p>根據資源類型，有些屬性是必要的，例如 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a> 資源的 ImageId 屬性，有些則是選擇性的。有些屬性具有預設值，例如 <code class="code">AWS::S3::Bucket</code> 資源的 AccessControl 屬性，因此可選擇性地为這些屬性指定值。有些屬性不是必要的，但可以新增您想要的功能，例如 <code class="code">AWS::S3::Bucket</code> 資源的 <code class="code">WebsiteConfiguration</code> 屬性。指定這類屬性的值完全是選擇性的，視您的需求而定。在上述範例中，因為 <code class="code">AWS::S3::Bucket</code> 資源只有選用的屬性，且我們不需要任何選用功能，所以我們可以接受預設值並忽略 Properties (屬性) 屬性。</p>
    <p>若要檢視每個資源類型的屬性，請參閱 <a href="./aws-template-resource-type-ref.html">AWS 資源和屬性類型參考</a>中的主題。</p>
   
    <h2 id="gettingstarted.templatebasics.multiple">資源屬性和配合使用資源</h2>

    <p>資源的屬性通常只是一個字串值。例如，以下範本為儲存貯體的 AccessControl 屬性指定固定的 ACL (PublicRead)。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead"&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
</code></pre>
    </div>
    <p>有些資源可有多個屬性，有些屬性可有一或多個子屬性。例如，<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a> 資源有兩個屬性 AccessControl 和 WebsiteConfiguration。WebsiteConfiguration 屬性有兩個子屬性 IndexDocument 和 ErrorDocument。以下範本顯示我們有其他屬性的原始儲存貯體資源。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead",&#xD;
                "WebsiteConfiguration": <span>{</span>&#xD;
                    "IndexDocument": "index.html",&#xD;
                    "ErrorDocument": "error.html"&#xD;
                }&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
      WebsiteConfiguration:&#xD;
        IndexDocument: index.html&#xD;
        ErrorDocument: error.html&#xD;
</code></pre>
    </div>
    <p>範本和 CloudFormation 最大的好處之一，是能夠建立一組得以一同建立應用程式或解決方案的資源。範本內用於資源的名稱是邏輯名稱。CloudFormation 建立資源時，其會產生以邏輯名稱、堆疊名稱和唯一 ID 組合為基礎的實體名稱。</p>

    <p>您可能想知道如何在以另一個資源名稱或屬性為基礎的資源上設定屬性。<span>例如，您可以建立<span>由 S3 儲存貯體或使用 EC2 安全群組之</span> EC2 執行個體支援的 CloudFront 分佈，而所有這些資源可建立在相同的範本中。</span>CloudFormation 有許多內部函數，您可以用來參考其他資源及其屬性。您可以使用 <a href="./intrinsic-function-reference-ref.html">Ref 函數</a>參考資源的識別屬性。這通常是資源的實體名稱，不過，有時候也可以是識別碼，例如 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-eip.html">AWS::EC2::EIP</a> 資源的 IP 地址或 Amazon SNS 主題的 Amazon Resource Name (ARN)。如需 Ref 函數傳回的值清單，請參閱 <a href="./intrinsic-function-reference-ref.html">Ref 函數</a>。以下範本包含 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a> 資源。該資源的 SecurityGroups 屬性呼叫 Ref 函數參考 <code class="code">AWS::EC2::SecurityGroup</code> 資源 InstanceSecurityGroup。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json3">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    }
                ],
                "KeyName": "mykey",
                "ImageId": ""
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml3">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
      KeyName: mykey
      ImageId: ''
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>SecurityGroups 屬性是安全群組的清單，我們在之前的範例中，清單中只有一個項目。以下範本在 SecurityGroups 屬性清單中有一個額外的項目。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json4">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    },
                    "MyExistingSecurityGroup"
                ],
                "KeyName": "mykey",
                "ImageId": "ami-7a11e213"
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml4">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: mykey
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>MyExistingSecurityGroup 是一個字串，其參考的是現有的 EC2 安全群組，而非範本中宣告的安全群組。您要使用文字字串參考現有的 AWS 資源。</p>
    <p>在上述範例中，<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a> 的 KeyName 屬性是文字字串 mykey。這表示名稱為 mykey 的金鑰對必須存在於建立堆疊的區域中，否則堆疊建立會因為金鑰對不存在而失敗。您使用的金鑰對會隨您建立堆疊的區域而異，或者您可能想要與他人共享範本，讓他們能用自己的 AWS 帳戶使用範本。若是如此，您可以使用輸入參數，以便在建立堆疊時指定金鑰對名稱。Ref 函數可以參考在堆疊建立時指定的輸入參數。以下範本會新增包含 KeyName 參數的 Parameters 物件，用來指定 <code class="code">AWS::EC2::Instance</code> 資源的 KeyName 屬性。參數類型是 <code class="code">AWS::EC2::KeyPair::KeyName</code>，可確保使用者在其帳戶及建立堆疊的區域中指定有效的金鑰對名稱。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json5">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "The EC2 Key Pair to allow SSH access to the instance",
      "Type": "AWS::EC2::KeyPair::KeyName"
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "SecurityGroups": [
          <span>{</span>
            "Ref": "InstanceSecurityGroup"
          },
          "MyExistingSecurityGroup"
        ],
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": "ami-7a11e213"
      }
    },
    "InstanceSecurityGroup": <span>{</span>
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": <span>{</span>
        "GroupDescription": "Enable SSH access via port 22",
        "SecurityGroupIngress": [
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 22,
            "ToPort": 22,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml5">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: The EC2 Key Pair to allow SSH access to the instance
    Type: 'AWS::EC2::KeyPair::KeyName'
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: !Ref KeyName
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>如果資源傳回的參數或值確實是您要的，Ref 函數會很方便，但您可能需要資源的其他屬性。例如，如果您想要建立有 S3 來源的 CloudFront 分佈，您需要使用 DNS 樣式地址指定儲存貯體位置。多項有其他屬性的資源，其值可用於範本中。您可以使用 <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a> 函數取得這些屬性。以下範本會使用 Fn::GetAtt 函數取得儲存貯體的 DomainName 屬性，來建立指定 S3 儲存貯體資源之 DNS 名稱的 CloudFront 分佈資源。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json6">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "myBucket": <span>{</span>
      "Type": "AWS::S3::Bucket"
    },
    "myDistribution": <span>{</span>
      "Type": "AWS::CloudFront::Distribution",
      "Properties": <span>{</span>
        "DistributionConfig": <span>{</span>
          "Origins": [
            <span>{</span>
              "DomainName": <span>{</span>
                "Fn::GetAtt": [
                  "myBucket",
                  "DomainName"
                ]
              },
              "Id": "myS3Origin",
              "S3OriginConfig": <span>{</span>}
            }
          ],
          "Enabled": "true",
          "DefaultCacheBehavior": <span>{</span>
            "TargetOriginId": "myS3Origin",
            "ForwardedValues": <span>{</span>
              "QueryString": "false"
            },
            "ViewerProtocolPolicy": "allow-all"
          }
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml6">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  myBucket:
    Type: 'AWS::S3::Bucket'
  myDistribution:
    Type: 'AWS::CloudFront::Distribution'
    Properties:
      DistributionConfig:
        Origins:
          - DomainName: !GetAtt 
              - myBucket
              - DomainName
            Id: myS3Origin
            S3OriginConfig: <span>{</span>}
        Enabled: 'true'
        DefaultCacheBehavior:
          TargetOriginId: myS3Origin
          ForwardedValues:
            QueryString: 'false'
          ViewerProtocolPolicy: allow-all</code></pre>
    </div>
    <p>Fn::GetAtt 函數需要兩個參數擷取資源邏輯名稱及屬性名稱。如需資源有效屬性的完整清單，請參閱 <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a>。您要通知 Fn::GetAtt 函數在陣列中列出它的兩個參數。對於需要多個參數的函數，您使用陣列指定它們的參數。</p>
   
    <h2 id="gettingstarted.templatebasics.parameters">使用輸入參數接收使用者輸入</h2>

    <p>到目前為止，您已了解資源以及如何在範本中運用的一些內容。您已了解如何參考輸入參數，但對於如何定義輸入參數本身，我們尚未深入了解。讓我們來看看參數宣告以及如何限制與驗證使用者輸入。</p>
    <p>您會在範本的 Parameters 物件中宣告參數。參數包含定義其值的屬性清單以及針對其值的限制條件。唯一的必要屬性是 Type，可以是字串、數值或 AWS 專屬類型。您也可以新增 Description 屬性，告知使用者更多應該指定哪種值的資訊。使用者使用 Create Stack (建立堆疊) 精靈中的範本時，Specify Parameters (指定參數) 頁面上會出現參數的名稱和描述。</p>
    <p>下列範本片段是 Parameters 物件，宣告上述 Specify Parameters (指定參數) 頁面中使用的參數。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description" : "Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server",
      "Type": "AWS::EC2::KeyPair::KeyName"
    },
    "WordPressUser": <span>{</span>
      "Default": "admin",
      "NoEcho": "true",
      "Description" : "The WordPress database admin account user name",
      "Type": "String",
      "MinLength": "1",
      "MaxLength": "16",
      "AllowedPattern" : "[a-zA-Z][a-zA-Z0-9]*"
    },
    "WebServerPort": <span>{</span>
      "Default": "8888",
      "Description" : "TCP/IP port for the WordPress web server",
      "Type": "Number",
      "MinValue": "1",
      "MaxValue": "65535"
    }
  }</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server
    Type: AWS::EC2::KeyPair::KeyName
  WordPressUser:
    Default: admin
    NoEcho: true
    Description: The WordPress database admin account user name
    Type: String
    MinLength: 1
    MaxLength: 16
    AllowedPattern: "[a-zA-Z][a-zA-Z0-9]*"
  WebServerPort:
    Default: 8888
    Description: TCP/IP port for the WordPress web server
    Type: Number
    MinValue: 1
    MaxValue: 65535</code></pre>
    </div>
    <p>針對有預設值的參數，除非使用者指定另一個值，否則 CloudFormation 會使用預設值。如果您略過預設的屬性，則使用者必須為該參數指定一個值；不過，要求使用者輸入值不確保該值有效。若要驗證參數值，您可以宣告限制條件或指定 AWS 專屬參數類型。</p>
    <p>您要通知 <code class="code">KeyName</code> 參數沒有 <code class="code">Default</code> 屬性，但其他參數有。例如，<code class="code">WordPressUser</code> 參數有屬性 <code class="code">Default: admin</code>，但 <code class="code">KeyName</code> 參數什麼都沒有。使用者必須在堆疊建立時指定金鑰名稱值。否則，CloudFormation 無法建立堆疊，且會擲出例外狀況：<code class="code">Parameters: [KeyName] must have
        values</code>。</p>
    <p>針對 AWS 特定參數類型，CloudFormation 會先針對使用者 AWS 帳戶及其建立堆疊區域中的現有值驗證輸入值，<em>之後</em>再建立任何堆疊資源。在範例範本中，<code class="code">KeyName</code> 參數是 <code class="code">AWS::EC2::KeyPair::KeyName</code> 的 AWS 特定參數類型。CloudFormation 會先檢查使用者是否指定有效的 EC2 金鑰對名稱，再建立堆疊。另一個 AWS 專屬參數類型範例是 <code class="code">AWS::EC2::VPC::Id</code>，需要使用者指定有效的 VPC ID。使用者使用 Create Stack (建立堆疊) 精靈時，除了前期驗證，AWS 主控台還會顯示 AWS 特定參數類型的有效值下拉式清單，例如有效的 EC2 金鑰對名稱或 VPC ID。</p>
    <p><code class="code">String</code> 類型可以使用下列屬性宣告限制條件：<code class="code">MinLength</code>、<code class="code">MaxLength</code>、<code class="code">Default</code>、<code class="code">AllowedValues</code> 和 <code class="code">AllowedPattern</code>。在上述範例中，<code class="code">WordPressUser</code> 參數有三項限制條件：參數值長度必須介於 1 到 16 個字元之間 (<code class="code">MinLength</code>、<code class="code">MaxLength</code>)，而且必須以字母開頭，後面加上任意組合的字母和數字 (<code class="code">AllowedPattern</code>)。</p>
    <p><code class="code">Number</code> 類型可以宣告下列限制條件：<code class="code">MinValue</code>、<code class="code">MaxValue</code>、<code class="code">Default</code> 和 <code class="code">AllowedValues</code>。數值可以是整數或浮點值。在上述範例中，<code class="code">WebServerPort</code> 參數必須是介於 1 和 65535 (含) 之間的數值 (<code class="code">MinValue</code>、<code class="code">MaxValue</code>)。</p>
    <p>本章節前文中曾提及，參數是指定您需要使用但不想內嵌在範本本身中之敏感或實作專屬資料 (例如密碼或使用者名稱) 的最好方法。若您將 <code class="code">NoEcho</code> 屬性設為 <code class="code">true</code>，CloudFormation 會將任何描述堆疊或堆疊事件呼叫所傳回的參數值以星號 (*****) 遮罩，但儲存在以下指定位置中的資訊除外。在上述範例中，檢視堆疊設定的任何人都看不到 <code class="code">WordPressUser</code> 參數值，參數值會傳回為星號。</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>使用 <code class="code">NoEcho</code> 屬性不會遮罩任何儲存在下列資訊中的資訊：</p><div class="itemizedlist">
               
               
               
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">Metadata</code> 範本區段。CloudFormation 不會轉換、修改或標記您在 <code class="code">Metadata</code> 區段中包含的任何資訊。若要取得更多資訊，請參閱<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/metadata-section-structure.html">中繼資料</a>。</p></li><li class="listitem"><p><code class="code">Outputs</code> 範本區段。如需詳細資訊，請參閱<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/outputs-section-structure.html">輸出</a>。</p></li><li class="listitem"><p>資源定義的 <code class="code">Metadata</code> 屬性。如需詳細資訊，請參閱<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-metadata.html">中繼資料屬性</a>。</p></li></ul></div><p>我們強烈建議您不要使用這些機制來包含敏感資訊，例如密碼或秘密。</p></div></div>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>建議您在堆疊範本中使用動態參數，以參考在 CloudFormation 以外 (例如 AWS Systems Manager 參數存放區或 AWS Secrets Manager) 存放和管理的敏感資訊，而不要在 CloudFormation 範本中直接嵌入敏感資訊。</p><p>如需詳細資訊，請參閱<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html#creds">請勿在範本中內嵌認證</a>的最佳實務。</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.mappings">使用映射指定條件值</h2>

    <p>參數是讓使用者指定唯一或敏感的值以供堆疊資源屬性使用的絕佳方式，不過，有些設定與區域相依，或對使用者而言因為其他條件或相依性而略微複雜難解。在這些情況下，您可能要在範本本身中放入一些邏輯，讓使用者可以指定簡單的值 (或完全不指定)，以取得他們希望的結果。在之前的範例中，我們為 EC2 執行個體的 ImageId 屬性硬式編碼了 AMI ID。<span>這在美國東部區域運作正常，該區域代表我們需要的 AMI。不過，如果使用者嘗試在不同的區域中建置堆疊，他們就會收到錯誤的 AMI 或完全沒有 AMI。(AMI ID 對區域而言是唯一的，所以不同區域中之相同 AMI ID 可能不代表任何 AMI 或為截然不同的 AMI。)</span> </p>
    <p>為避免此問題，您需要一個方法，根據條件輸入指定正確的 AMI ID (在本範例中為建立堆疊的區域)。有兩種範本功能可協助您：Mappings 物件和 <code class="code">AWS::Region</code> 虛擬參數。</p>
    <p><code class="code">AWS::Region</code> 虛擬參數是 CloudFormation 解析為堆疊建立區域的值。當您建立堆疊時，CloudFormation 會解析虛擬參數。映射可讓您使用輸入值作為決定另一個值的條件。類似參數陳述式，映射會建立一組值與另一組值的關聯。配合映射使用 <code class="code">AWS::Region</code> 參數，可確保指定適當的區域 AMI ID。<span>以下範本包含的 Mappings 物件有名為 RegionMap 之映射，用來將 AMI ID 映射到適當的區域。</span></p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "Name of an existing EC2 KeyPair to enable SSH access to the instance",
      "Type": "String"
    }
  },
  "Mappings": <span>{</span>
    "RegionMap": <span>{</span>
      "us-east-1": <span>{</span>
        "AMI": "ami-76f0061f"
      },
      "us-west-1": <span>{</span>
        "AMI": "ami-655a0a20"
      },
      "eu-west-1": <span>{</span>
        "AMI": "ami-7fd4e10b"
      },
      "ap-southeast-1": <span>{</span>
        "AMI": "ami-72621c20"
      },
      "ap-northeast-1": <span>{</span>
        "AMI": "ami-8e08a38f"
      }
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": <span>{</span>
          "Fn::FindInMap": [
            "RegionMap",
            <span>{</span>
              "Ref": "AWS::Region"
            },
            "AMI"
          ]
        },
        "UserData": <span>{</span>
          "Fn::Base64": "80"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instance
    Type: String
Mappings:
  RegionMap:
    us-east-1:
      AMI: ami-76f0061f
    us-west-1:
      AMI: ami-655a0a20
    eu-west-1:
      AMI: ami-7fd4e10b
    ap-southeast-1:
      AMI: ami-72621c20
    ap-northeast-1:
      AMI: ami-8e08a38f
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      KeyName: !Ref KeyName
      ImageId: !FindInMap 
        - RegionMap
        - !Ref 'AWS::Region'
        - AMI
      UserData: !Base64 '80'</code></pre>
    </div>
    <p>在 RegionMap 中，每個區域都會映射到名稱/值對。名稱/值對是一個標籤，也是要映射的值。在 RegionMap 中，AMI 是標籤，而 AMI ID 是值。若要使用映射傳回值，您可以使用 <a href="./intrinsic-function-reference-findinmap.html">Fn::FindInMap</a> 函數，傳遞您想要傳回的映射名稱 (用於尋找映射值的值) 以及映射值的標籤。<span>在上述範例中，透過將 RegionMap 指定為要使用的映射、將 AWS::Region 指定為映射來源的輸入值，以及將 AMI 指定為識別要映射之值的標籤，資源 Ec2Instance 的 ImageId 屬性使用 Fn::FindInMap 函數判斷其值。例如，如果在美國西部 (加利佛尼亞北部) 區域中使用此範本建立堆疊，則 <code class="code">ImageId</code> 將設定為 <code class="code">ami-655a0a20</code>。</span></p>
    <div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>提示</h6></div><div class="awsdocs-note-text"><p><code class="code">AWS::Region</code> 虛擬參數可讓您取得建立堆疊的區域。有些資源，例如 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>、<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html">AWS::AutoScaling::AutoScalingGroup</a> 和 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a>，有指定可用區域的屬性。您可以使用 <a href="./intrinsic-function-reference-getavailabilityzones.html">Fn::GetAZs 函數</a>取得某個區域的所有可用區域清單。</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.outputs">已建構的值和輸出值</h2>

    <p>參數和映射都是在堆疊建立時傳遞或判斷特定值的絕佳方式，但有時候，來自參數或其他資源屬性的值只是您所需值的一部分。例如，在以下 WordPress 範本片段中，透過串連 <code class="code">WebServerPort</code> 參數和其他文字字串形成所需的值，Fn::Join 函數會建構 <code class="code">ElasticLoadBalancer</code> 資源之 <code class="code">HealthCheck</code> 屬性的 <code class="code">Target</code> 子屬性。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "ElasticLoadBalancer": <span>{</span>
      "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
      "Properties": <span>{</span>
        "AvailabilityZones": <span>{</span>
          "Fn::GetAZs": ""
        },
        "Instances": [
          <span>{</span>
            "Ref": "Ec2Instance1"
          },
          <span>{</span>
            "Ref": "Ec2Instance2"
          }
        ],
        "Listeners": [
          <span>{</span>
            "LoadBalancerPort": "80",
            "InstancePort": <span>{</span>
              "Ref": "WebServerPort"
            },
            "Protocol": "HTTP"
          }
        ],
        "HealthCheck": <span>{</span>
          "Target": <span>{</span>
            "Fn::Join": [
              "",
              [
                "HTTP:",
                <span>{</span>
                  "Ref": "WebServerPort"
                },
                "/"
              ]
            ]
          },
          "HealthyThreshold": "3",
          "UnhealthyThreshold": "5",
          "Interval": "30",
          "Timeout": "5"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  ElasticLoadBalancer:
    Type: 'AWS::ElasticLoadBalancing::LoadBalancer'
    Properties:
      AvailabilityZones: !GetAZs ''
      Instances:
        - !Ref Ec2Instance1
        - !Ref Ec2Instance2
      Listeners:
        - LoadBalancerPort: '80'
          InstancePort: !Ref WebServerPort
          Protocol: HTTP
      HealthCheck:
        Target: !Join 
          - ''
          - - 'HTTP:'
            - !Ref WebServerPort
            - /
        HealthyThreshold: '3'
        UnhealthyThreshold: '5'
        Interval: '30'
        Timeout: '5'</code></pre>
    </div>
    <p>Fn::Join 函數需要兩個參數，一個分隔您要串連之值的分隔符號，以及一個依您想要之顯示順序排列的值陣列。在上述範例中，Fn::Join 函數將空白字串指定為分隔符號和 HTTP:、指定 WebServerPort 參數的值，以及將 / 字元指定為要串連的值。如果 WebServerPort 曾有 8888 的值，則 Target 屬性應設定為以下值：</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">HTTP:8888/</code></pre>
    <p>Fn::Join 函數也適用於宣告堆疊的輸出值。範本中的 Outputs 物件包含您想要在建立堆疊後使用之值的宣告。輸出是擷取資源或輸入參數重要資訊的便捷方式。例如，我們在 WordPress 範本中宣告以下 Outputs 物件。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Outputs": <span>{</span>
        "InstallURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        },
                        "/wp-admin/install.php"
                    ]
                ]
            },
            "Description": "Installation URL of the WordPress website"
        },
        "WebsiteURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        }
                    ]
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  InstallURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName
        - /wp-admin/install.php
    Description: Installation URL of the WordPress website
  WebsiteURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName</code></pre>
    </div>
    <p>每個輸出值都有名稱、包含傳回為輸出值之值宣告的 Value 屬性，以及選擇性的值描述。在上述範例中，InstallURL 是 Fn::Join 函數呼叫傳回的字串，它會串連 http://、資源 ElasticLoadBalancer 的 DNS 名稱，以及 /wp-admin/install.php。輸出值可能類似以下內容：</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">http://mywptests-elasticl-1gb51l6sl8y5v-206169572.<span><code class="code" copy="true">us-east-2</code></span>.elb.amazonaws.com/wp-admin/install.php</code></pre>
    <p>在入門教學中，我們使用此連結以利移至所建立之 WordPress 部落格的安裝頁面。CloudFormation 會在堆疊建立完成後產生輸出值。您可以在 CloudFormation 主控台的 Outputs (輸出) 索引標籤中檢視輸出值，或使用 <code class="code">aws cloudformation describe-stacks</code> 命令檢視輸出值。</p>
   
    <h2 id="gettingstarted.templatebasics.learnmore">後續步驟</h2>

    <p>我們只演練了範本及其使用方式的基本部分。您已了解範本下列內容：</p>
    <div class="itemizedlist">
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>宣告資源及其屬性。</p>
      </li><li class="listitem">
        <p>使用 Ref 函數及使用 Fn::GetAtt 函數的資源屬性參考其他資源。</p>
      </li><li class="listitem">
        <p>使用參數讓使用者能夠在建立堆疊時指定值，並使用限制條件驗證參數輸入。</p>
      </li><li class="listitem">
        <p>使用映射判斷條件值。</p>
      </li><li class="listitem">
        <p>使用 Fn::Join 函數根據參數、資源屬性和其他字串來建構值。</p>
      </li><li class="listitem">
        <p>使用輸出值來擷取堆疊資源的相關資訊。</p>
      </li></ul></div>
    <p>我們不討論範本中最上層的兩個物件：AWSTemplateFormatVersion 和 Description。AWSTemplateFormatVersion 就是範本格式的版本，如果您不指定此版本，CloudFormation 會使用最新版本。</p>
    <p>Description 是任何有效的 JSON 或 YAML 字串。此描述會顯示在 Create Stack (建立堆疊) 精靈的 Specify Parameters (指定參數) 頁面。如需詳細資訊，請參閱<a href="./format-version-structure.html">格式版本</a>及<a href="./template-description-structure.html">描述</a>。</p>

    <p>當然，還有更多進階範本和堆疊功能。以下是幾個您會想要進一步了解的重要項目清單：</p>
    <p>可搭配任何資源使用的「選用屬性」<em></em>：</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><a href="./aws-attribute-dependson.html">DependsOn 屬性</a>可讓您指定必須在另一項資源後建立的資源。</p>
      </li><li class="listitem">
        <p><a href="./aws-attribute-deletionpolicy.html">DeletionPolicy 屬性</a>可讓您指定 CloudFormation 應如何處理刪除資源。</p>
      </li><li class="listitem">
        <p><a href="./aws-attribute-metadata.html">Metadata</a> 屬性可讓您指定附資源的結構化資料。</p>
      </li></ul></div>
    <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-stack.html"><em>AWS::CloudFormation::Stack</em></a> 可讓您將另一個堆疊套疊為範本內的資源。</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>您的瀏覽器已停用或無法使用 Javascript。</strong></p><p>您必須啟用 Javascript，才能使用 AWS 文件。請參閱您的瀏覽器說明頁以取得說明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文件慣用形式</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./GettingStarted.Walkthrough.html">開始使用</div><div id="next" class="next-link" accesskey="n" href="./updating.stacks.walkthrough.html">演練：更新堆疊</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此頁面是否有幫助？ - 是</div><div class="content"><p>感謝您，讓我們知道我們做得很好！</p><p>若您有空，歡迎您告知我們值得讚許的地方，這樣才能保持良好服務。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此頁面是否有幫助？ - 否</div><div class="content"><p>感謝讓我們知道此頁面仍須改善。很抱歉，讓您失望。</p><p>若您有空，歡迎您提供改善文件的方式。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>